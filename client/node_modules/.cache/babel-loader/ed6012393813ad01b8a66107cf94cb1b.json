{"ast":null,"code":"var _jsxFileName = \"/home/bill/Personal/assignment/client/src/pages/TaskList.js\",\n    _s = $RefreshSig$();\n\nimport axios from \"axios\";\nimport React, { useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router\";\nimport { isLoggedIn } from \"../utils/auth\";\nimport { config } from \"../utils/header-config\";\nimport \"../styles/task-list.css\";\nimport TaskItem from \"../components/TaskItem\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst TaskList = () => {\n  _s();\n\n  const [tasks, setTasks] = useState([]);\n  const history = useHistory();\n  useEffect(() => {\n    if (!isLoggedIn()) {\n      history.push(\"login\");\n    } else {\n      getTasks();\n    }\n  }, [isLoggedIn(), history]);\n\n  const getTasks = async () => {\n    const {\n      data\n    } = await axios.get(\"/api/todos/\", config);\n\n    if (data) {\n      setTasks(data);\n    }\n  };\n\n  const handleTaskDelete = async id => {\n    await axios.delete(`/api/todos/${id}`, config).then(() => {\n      getTasks();\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: [tasks.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"no-tasks\",\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"No tasks found to display\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 17\n    }, this), tasks.length > 0 && /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"task-list\",\n      children: tasks.map(task => /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"task-item\",\n        children: /*#__PURE__*/_jsxDEV(TaskItem, {\n          task: task,\n          taskDelete: handleTaskDelete\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 26\n        }, this)\n      }, task._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 22\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 18\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 9\n  }, this);\n};\n\n_s(TaskList, \"VhT7IMleaB8K5zMkoC+b1EhCX8k=\", false, function () {\n  return [useHistory];\n});\n\n_c = TaskList;\nexport default TaskList;\n\nvar _c;\n\n$RefreshReg$(_c, \"TaskList\");","map":{"version":3,"sources":["/home/bill/Personal/assignment/client/src/pages/TaskList.js"],"names":["axios","React","useEffect","useState","useHistory","isLoggedIn","config","TaskItem","TaskList","tasks","setTasks","history","push","getTasks","data","get","handleTaskDelete","id","delete","then","length","map","task","_id"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,UAAT,QAA2B,cAA3B;AACA,SAASC,UAAT,QAA2B,eAA3B;AACA,SAASC,MAAT,QAAuB,wBAAvB;AACA,OAAO,yBAAP;AACA,OAAOC,QAAP,MAAqB,wBAArB;;;AAEA,MAAMC,QAAQ,GAAG,MAAM;AAAA;;AACnB,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBP,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAMQ,OAAO,GAAGP,UAAU,EAA1B;AAGAF,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAG,CAACG,UAAU,EAAd,EAAiB;AACbM,MAAAA,OAAO,CAACC,IAAR,CAAa,OAAb;AACH,KAFD,MAEK;AACDC,MAAAA,QAAQ;AACX;AACJ,GANQ,EAMN,CAACR,UAAU,EAAX,EAAeM,OAAf,CANM,CAAT;;AAQA,QAAME,QAAQ,GAAG,YAAW;AACxB,UAAM;AAACC,MAAAA;AAAD,QAAS,MAAMd,KAAK,CAACe,GAAN,CAAU,aAAV,EAAyBT,MAAzB,CAArB;;AACA,QAAGQ,IAAH,EAAQ;AACJJ,MAAAA,QAAQ,CAACI,IAAD,CAAR;AACH;AACJ,GALD;;AAOA,QAAME,gBAAgB,GAAG,MAAMC,EAAN,IAAa;AAClC,UAAMjB,KAAK,CAACkB,MAAN,CAAc,cAAaD,EAAG,EAA9B,EAAiCX,MAAjC,EAAyCa,IAAzC,CAA8C,MAAM;AACtDN,MAAAA,QAAQ;AACX,KAFK,CAAN;AAGH,GAJD;;AAMA,sBACI,QAAC,KAAD,CAAO,QAAP;AAAA,eACKJ,KAAK,CAACW,MAAN,KAAiB,CAAjB,iBACG;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA,6BACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YAFR,EAMKX,KAAK,CAACW,MAAN,GAAe,CAAf,iBACI;AAAI,MAAA,SAAS,EAAC,WAAd;AAAA,gBACCX,KAAK,CAACY,GAAN,CAAUC,IAAI,iBACX;AAAI,QAAA,SAAS,EAAC,WAAd;AAAA,+BACI,QAAC,QAAD;AAAU,UAAA,IAAI,EAAEA,IAAhB;AAAsB,UAAA,UAAU,EAAEN;AAAlC;AAAA;AAAA;AAAA;AAAA;AADJ,SAA+BM,IAAI,CAACC,GAApC;AAAA;AAAA;AAAA;AAAA,cADH;AADD;AAAA;AAAA;AAAA;AAAA,YAPT;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;AAoBH,CA9CD;;GAAMf,Q;UAEcJ,U;;;KAFdI,Q;AAgDN,eAAeA,QAAf","sourcesContent":["import axios from \"axios\";\nimport React, { useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router\";\nimport { isLoggedIn } from \"../utils/auth\";\nimport { config } from \"../utils/header-config\";\nimport \"../styles/task-list.css\"\nimport TaskItem from \"../components/TaskItem\";\n\nconst TaskList = () => {\n    const [tasks, setTasks] = useState([])\n    const history = useHistory()\n\n\n    useEffect(() => {\n        if(!isLoggedIn()){\n            history.push(\"login\")\n        }else{\n            getTasks()\n        }\n    }, [isLoggedIn(), history])\n\n    const getTasks = async() => {\n        const {data} = await axios.get(\"/api/todos/\", config)\n        if(data){\n            setTasks(data)\n        }\n    }\n\n    const handleTaskDelete = async(id) => {\n        await axios.delete(`/api/todos/${id}`, config).then(() => {\n            getTasks()\n        })\n    }\n\n    return (\n        <React.Fragment>\n            {tasks.length === 0 && (\n                <div className=\"no-tasks\">\n                    <h1>No tasks found to display</h1>\n                </div>\n            )}\n            {tasks.length > 0 && (\n                 <ul className=\"task-list\">\n                 {tasks.map(task => (\n                     <li className=\"task-item\" key={task._id}>\n                         <TaskItem task={task} taskDelete={handleTaskDelete}/>\n                     </li>\n                 ))}\n             </ul>\n            )}\n           \n            \n        </React.Fragment>\n    )\n}\n\nexport default TaskList"]},"metadata":{},"sourceType":"module"}